<!-- Coded for PS3™ Pro by Luan Teles -->
<html>
   <head>
      <title>PlayStation&trade; Network Database</title>
   </head>
   <script>
      javascript:window.resizeTo(screen.width,screen.height)
   </script>
   <style>
      html, body {
         margin: 0;
         padding: 0;
         height: 100%;
         background: url("https://ps3-pro.github.io/PSN-Content/resources/media/background.png") no-repeat center center fixed;
         background-size: cover;
         color: #fff;
         font-family: Arial, sans-serif;
         text-align: center;
      }
      
      header {
         position: fixed;
         top: 0;
         left: 0;
         right: 0;
         height: 130px;
         padding: 10px 15px;
         background: rgba(0, 0, 0, 0.6);
         text-align: center;
         font-size: 12px;
         font-weight: bold;
         border-bottom: 2px solid #888;
         display: block;
         z-index: 2;
      }
      
      header a {
         font-size: 3em;
         color: #ffffff;
         text-decoration: none;
         font-weight: bold;
         display: block;
      }
      
      header a:hover {
         color: #66ccff;
      }
	  

	header form {
		display: flex;
		align-items: center;
		justify-content: center;
		gap: 10px;
		white-space: nowrap; 
	}
	
	.is-ps3 header #cover-toggle {
		font-size: 1.2em;
		padding: 0 10px;
		background: rgba(0, 0, 0, 0.6);
		border: 1px solid #aaa;
		border-radius: 5px;
		cursor: pointer;
		display: inline-block;
		vertical-align: middle; 
		margin-top: -5px;
		margin-left: 5px;
		line-height: 29px;
		box-sizing: border-box;
	}
	
	.is-pc header #cover-toggle {
		font-size: 1.2em;
		padding: 0 10px;
		background: rgba(0, 0, 0, 0.6);
		border: 1px solid #aaa;
		border-radius: 5px;
		cursor: pointer;
		display: inline-block;
		vertical-align: middle; 
		margin-left: 5px;
		line-height: 29px;
		box-sizing: border-box;
	}
	
	header #cover-toggle label {
    display: inline-block;
    gap: 5px; 
    margin: 0;
	vertical-align: middle;
}

header #cover-toggle input[type="checkbox"] {
    vertical-align: middle;
}

header #cover-toggle label input[type="checkbox"],
header #cover-toggle label {
   vertical-align: middle;
    display: inline-block;
}

header #cover-toggle label input[type="checkbox"] {
    vertical-align: middle;
}
      
      #selection-menu {
         position: fixed;
         top: 128px;
         left: 0;
         right: 0;
         height: 28px;
         background: rgba(0,0,0,0.0);
         display: flex;
         justify-content: center;
         align-items: center;
         gap: 10px;
         z-index: 6;
         font-size: 1em;
      }
      
      #selection-menu a {
         color: #fff;
         text-decoration: none;
         font-weight: bold;
         margin-left: 10px;
         margin-right: 10px;
      }
      
      #selection-menu a:hover {
         color: #66ccff;
      }
      
      form {
         margin: 10px auto;
      }
      
      input[type="search"],
      input[type="submit"],
      input[type="button"] {
         font-size: 1.2em;
         padding: 6px 10px;
         background: rgba(0, 0, 0, 0.6);
         border: 1px solid #aaa;
         border-radius: 5px;
         cursor: pointer;
      }
      
      input[type="submit"],
      input[type="button"] {
         color: #fff;
         margin-left: 5px;
      }
      
      input[type="search"] {
         width: 250px;
         color: #00008B;
      }
      
      button {
         margin: 2px;
         background: rgba(0, 0, 0, 0.6);
         border: 1px solid #aaa;
         color: #fff;
         border-radius: 4px;
         font-size: 1em;
         padding: 3px 6px;
      }
      
      button:hover {
         background: rgba(255, 255, 255, 0.1);
      }
      
      #main {
         width: 100%;
         height: 100%;
         position: relative;
         top: 170px;
      }
      
      .sidebar {
         position: fixed;
         top: 150px;
         bottom: 0;
         left: 0;
         width: 80px;
         height: 100vh;
         background: rgba(0, 0, 0, 0.6);
         padding: 0 5px 5px 5px;
         box-sizing: border-box;
         border-right: 2px solid #888;
         z-index: 3;
      }
      
      .is-ps3 .sidebar-top-border {
         position: fixed;
         top: 152px;
         bottom: 0;
         left: 5px;
         width: 90px;
         height: 2px;
         background: rgba(0, 8, 30, 1);
         margin-top: -2px;
         margin-left: -7px;
         z-index: 4;
      }
      
      .is-pc .sidebar-top-border {
         position: fixed;
         top: 152px;
         bottom: 0;
         left: -5px;
         width: 90px;
         height: 2px;
         background: rgba(0, 8, 30, 1);
         margin-top: -2px;
         margin-left: -7px;
         z-index: 4;
      }
      
      .sidebar-right {
         position: fixed;
         top: 150px;
         bottom: 0;
         right: 0;
         width: 80px;
         height: 100vh;
         background: rgba(0, 0, 0, 0.6);
         padding: 0 5px 5px 5px;
         box-sizing: border-box;
         border-left: 2px solid #888;
         z-index: 3;
      }
      
      .is-ps3 .sidebar-right-top-border {
         position: fixed;
         top: 152px;
         right: 5px;
         width: 90px;
         height: 2px;
         background: rgba(7, 5, 60, 0.7);
         margin-top: -2px;
         margin-right: -7px;
         z-index: 4;
      }
      
      .is-pc .sidebar-right-top-border {
         position: fixed;
         top: 152px;
         right: -5px;
         width: 90px;
         height: 2px;
         background: rgba(7, 5, 60, 0.7);
         margin-top: -2px;
         margin-right: -7px;
         z-index: 4;
      }
      
      .sidebar ul, .sidebar-right ul {
         list-style: none;
         padding: 0;
         margin: 0;
      }
      
      .sidebar ul li, .sidebar-right ul li {
         margin: 5px 0;
      }
      
      .sidebar ul li a, .sidebar-right ul li a {
         text-decoration: underline;
         display: block;
         color: #ffffff;
      }
      
      .sidebar ul li a:hover, .sidebar-right ul li a:hover {
         color: #ffff00;
      }
      
      .sidebar ul li a:active, .sidebar-right ul li a:active {
         color: #0000ff;
      }
      
      .sidebar-heading-left {
         color: #FFFFFF;
         font-weight: bold;
         font-size: 1.2em;
         margin-top: 10px;
         text-align: center;
      }
      
      .sidebar-heading-right {
         color: #FFFFFF;
         font-weight: bold;
         font-size: 1.2em;
         margin-top: 10px;
         text-align: center;
      }
      
      #letters {
         margin-top: 10px;
      }
      
      #letters a {
         width: 100%;
         text-align: center;
         margin: 2px 0;
         display: block;
         color: #ffffff;
         text-decoration: underline;
      }
      
      #letters a.active, #region-links a.active {
         color: #66ccff;
         text-decoration: underline;
         font-weight: bold;
      }
      
      #letters a:hover {
         color: #ffff00;
      }
      
      #license-links {
         margin-top: 20px;
      }
      
      #region-links {
         margin-top: 10px;
      }
      
      #region-links a {
         width: 100%;
         text-align: center;
         margin: 2px 0;
         display: block;
         color: #ffffff;
      }
      
      #license-links a {
         width: 100%;
         text-align: center;
         margin: 2px 0;
         display: block;
         color: #ffffff;
      }
      
      .content {
         padding-right: 0px;
         text-align: center;
         margin-left: 80px;
         margin-right: 80px;
         display: flex;
         justify-content: center;
         min-height: calc(100vh - 170px);
		 padding-bottom: 20px;
      }
      
      ul#list {
         max-width: 1760px;
         min-width: 400px;
         list-style: none;
         padding: 10px 20px;
         margin: 0 auto;
         text-align: left;
         font-size: 1em;
         background: rgba(0, 0, 0, 0.5);
         border-radius: 10px;
         display: inline-block;
         vertical-align: top;
      }
      
      ul#list li {
		display: block;
        padding: 8px 10px;
        border-bottom: 1px solid #333;
		<!-- transition: padding 0.25s ease, background 0.25s ease, font-size 0.25s ease; -->
	  }
	
	 ul#list li:hover {
		position: relative;
		<!-- font-size: 1.02em !important; -->
		padding: 12px 14px !important;
		background: rgba(102, 204, 255, 0.15) !important;
		border-color: #66ccff;
		box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
		z-index: 1;
		transform: scale(1.05);
	  }
      
      ul#list li a {
         text-decoration: none;
         color: #fff;
         display: inline;
         white-space: nowrap;
      }
      
      ul#list li a:hover {
         text-decoration: underline;
         color: #66ccff;
      }
      
      [download] {
         background: #fff;
         color: #000 !important;
         padding: 2px 6px;
         margin-left: 5px;
         text-decoration: none;
         border-radius: 3px;
         font-size: 1.0em;
         display: inline;
         white-space: nowrap;
      }
      
      #icon {
         width: 64px;
         height: auto;
         margin: 10px auto;
      }
      
      ::-webkit-scrollbar {
         width: 8px;
      }
      
      ::-webkit-scrollbar-track {
         background: transparent;
      }
      
      ::-webkit-scrollbar-thumb {
         background: #aaa;
      }
      
      #backToTop {
         position: fixed;
         bottom: 20px;
         right: 110px;
         padding: 10px 16px;
         background: rgba(0, 0, 0, 0.7);
         color: white;
         font-weight: bold;
         border: 2px solid #888;
         border-radius: 8px;
         cursor: pointer;
         z-index: 15;
      }
      
      #backToTop:hover {
         background: rgba(255, 255, 255, 0.1);
      }
      
      #selection-menu a.active {
         color: #66ccff;
         text-decoration: underline;
      }
	  
	  #player_9428,#player_9428 object,#player_9428 embed {
		position: absolute !important;
		left: -9999px !important;
		top: -9999px !important;
		width: 1px !important;
		height: 1px !important;
		opacity: 0 !important;
		pointer-events: none !important;
		visibility: hidden !important;
	  }
	  
	  <!-- PC Overlay -->
	  #pc-audio-player-invisible {
		position: absolute !important;
		left: -9999px !important;
		top: -9999px !important;
		width: 1px !important;
		height: 1px !important;
		opacity: 0 !important;
		pointer-events: none !important;
		visibility: hidden !important;
	}
	
	#welcome-overlay-pc {
		position: fixed;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		background: rgba(0, 0, 0, 0.9);
		color: white;
		z-index: 9999;
		display: none; 
		justify-content: center;
		align-items: center;
		text-align: center;
	}
	
	body.is-pc #welcome-overlay-pc {
		display: flex;
	}
	
	#welcome-overlay-pc .dialog-box {
		background: rgba(0, 0, 0, 0.7);
		padding: 30px;
		border: 2px solid #888;
		border-radius: 10px;
		max-width: 500px;
	}
	
	#welcome-overlay-pc .dialog-box h2 {
		color: #66ccff;
		margin-top: 0;
	}
	
	#welcome-overlay-pc .dialog-box p {
		white-space: pre-wrap;
		margin-bottom: 20px;
	}
	
	#overlay-continue-btn {
		background: #007bff;
		color: white;
		border: none;
		padding: 10px 20px;
		font-size: 1.2em;
		cursor: pointer;
		border-radius: 5px;
	}
	
	<!-- GameUI -->
	#list.grid {
        font-size: 0;
        text-align: center;
        background: transparent;
        padding: 10px
    }
	
	ul#list.grid {
		text-align: center; 
		background: transparent; 
		padding: 10px;
		padding-right: 110px;
		padding-left: 110px;
	}
	
    .game-tile {
		display: inline-block;
		width: 140px;
		margin: 8px;
		background: rgba(0, 0, 0, 0.6);
		border: 1px solid #888;
		border-radius: 6px;
		padding: 20px 12px 20px 12px; 
		text-align: center;
		vertical-align: top;
		font-size: 12px;
	}

    .game-tile:hover {
        background: rgba(255, 255, 255, 0.1);
        border-color: #66ccff;
        transform: translateY(-2px);
    }

    .game-tile img {
        width: 120px;
        height: 140px;
        border-radius: 4px;
    }

    .game-tile .title {
        font-weight: bold;
        font-size: 12px;
        overflow: hidden;
        margin: 6px 0 2px;
        line-height: 13px;
		height: 27px;
		display: block;
		text-overflow: ellipsis;
    }

	.game-tile .title-id {
		color: #ffff00 !important;
		font-size: 11px;
		margin-bottom: 8px;
	}
	
	.game-tile .size {
		color: #aaa; 
		font-size: 11px;
	}

    .game-tile .links {
        margin-top: 4px;
        font-size: 10px;
    }

    .game-tile .links a {
        color: #fff;
        margin: 0 3px;
    }

    .game-tile .links a:hover {
        color: #66ccff;
        text-decoration: underline !important;
    }
	
	.game-tile .links a[href$=".pkg"],
	ul#list li a[href$=".pkg"] {
		background: #007bff;
		text-decoration: none;
		color: #fff !important;
		padding: 2px 6px;
		margin-left: 10px; 
		border-radius: 4px;
		font-size: 1.0em;
		display: inline-block;
		white-space: nowrap;
		border: 1px solid #0056b3;
		transition: background-color 0.2s;
	}
	
	.game-tile .links a[href$=".pkg"]:hover,
	ul#list li a[href$=".pkg"]:hover {
		background: #0056b3;
		text-decoration: none;
		color: #fff !important;
		text-decoration: underline !important;
	}
	
	ul#list:not(.grid) li a[href$=".pkg"]:hover {
    text-decoration: underline !important;
}
	
   </style>
   <body>
      <header>
         <a href="">PlayStation&trade; Network Database</a>
         <div id="count" aria-live="polite" role="status">Loading</div>
         <form name="engine" onsubmit="setFilter('search', this.query.value, null); return false;">
            <input type="search" name="query" size="25" placeholder="Search">
            <input type="submit" name="send" value="Search" disabled>
            <input type="button" id="license-link-rainbow" value="License Pack" onclick="window.location.href='https://github.com/PS3-Pro/License-Files/releases/download/Licenses/License_Pack_Bin.pkg'">
            <input type="button" name="fetch" value="Reload DB" onclick="triggerReload()">
			<div id="cover-toggle"><label><input type="checkbox" id="cover-gui">Cover GUI</label></div>
         </form>
      </header>
	  
		<div id="welcome-overlay-pc">
			<div class="dialog-box">
				<h2>PlayStation™ Network Database</h2>
				<p>Your browser may block the download of files.
If this happens, right-click on the game button and choose 'Save link as' to download manually.
				</p>
				<button id="overlay-continue-btn">
					Continue
				</button>
			</div>
		</div>
      
		<div id="selection-menu" aria-hidden="false">
			<a href="#" id="ln-avatar">Avatars</a>
			<a href="#" id="ln-demos">Demos</a>
			<a href="#" id="ln-dlcs">DLCs</a>
			<a href="#" id="ln-game">Games</a>
			<a href="#" id="ln-themes">Themes</a>
		</div>
		
		<div id="main">
			<div class="sidebar" id="sidebar">
				<div class="sidebar-top-border"></div>      
				<div class="sidebar-heading-left">Filter</div>
				<ul id="letters"></ul>
			</div>
			
			<div class="content">
				<ul id="list"></ul>
			</div>
         
         <div class="sidebar-right" id="sidebar-right">
            <div class="sidebar-right-top-border"></div>
            <div class="sidebar-heading-right">Region</div>
            <br>
            <ul id="region-links">
               <li><a href="#" class="active" onclick="setFilter('region', 'ALL', this); return false;">All</a></li>
               <li><a href="#" onclick="setFilter('region', 'US', this); return false;">US</a></li>
               <li><a href="#" onclick="setFilter('region', 'EU', this); return false;">EU</a></li>
               <li><a href="#" onclick="setFilter('region', 'JP', this); return false;">JP</a></li>
               <li><a href="#" onclick="setFilter('region', 'ASIA', this); return false;">ASIA</a></li>
            </ul>
         </div>
         
         <button id="backToTop" onclick="scrollToTop()">&#8593; Top</button>
      </div>
	  
	  <div id="pc-audio-player-invisible" align="center">
		<audio id="invisible-audio" autoplay loop>
			<source src="https://github.com/PS3-Pro/Whats-New/raw/main/media/ads/hall_of_fame.mp3" type="audio/mpeg">
		</audio>
	  </div>

	<div id="player_9428" align="center"></div>
      
	<script>
        // ==============================================================  
        // 0. DETECÇÃO DO PS3  
        // ==============================================================  
        var isPS3 = /PS3|PlayStation 3|NetFront/i.test(navigator.userAgent);

        // ==============================================================  
        // 1. CONFIGURAÇÕES GERAIS  
        // ==============================================================  
        var g_startupAlertMessage = null;
        var g_letterFilter = "";
        var g_regionFilter = "ALL";
        var useCoverGUI = false;
        var defaultCover = "https://ps3-pro.github.io/PSN-Content/resources/covers/PS3/NPUB30323.JPG";

        var g_defaultLetterFilter = "";

        var f = document.forms.engine;
        var dbPath = "https://ps3-pro.github.io/PSN-Content/resources/database/games.tsv";
        var DB = window.localStorage ? JSON.parse(localStorage.DB || '[]') : [];

        var g_allMatches = [];
        var g_chunkSize = 200;
        var g_currentChunkIndex = 0;

        // ==============================================================  
        // 2. CRIPTOGRAFIA  
        // ==============================================================  
        var tmdb_hmac_key_array = [
            0xF5, 0xDE, 0x66, 0xD2, 0x68, 0x0E, 0x25, 0x5B, 0x2D, 0xF7, 0x9E, 0x74, 0xF8, 0x90, 0xEB, 0xF3,
            0x49, 0x26, 0x2F, 0x61, 0x8B, 0xCA, 0xE2, 0xA9, 0xAC, 0xCD, 0xEE, 0x51, 0x56, 0xCE, 0x8D, 0xF2,
            0xCD, 0xF2, 0xD4, 0x8C, 0x71, 0x17, 0x3C, 0xDC, 0x25, 0x94, 0x46, 0x5B, 0x87, 0x40, 0x5D, 0x19,
            0x7C, 0xF1, 0xAE, 0xD3, 0xB7, 0xE9, 0x67, 0x1E, 0xEB, 0x56, 0xCA, 0x67, 0x53, 0xC2, 0xE6, 0xB0
        ];

        var tmdb_hmac_key_str = "";
        for (var k = 0; k < tmdb_hmac_key_array.length; k++) {
            tmdb_hmac_key_str += String.fromCharCode(tmdb_hmac_key_array[k]);
        }

        function rol(num, cnt) { return (num << cnt) | (num >>> (32 - cnt)); }
        function safe_add(x, y) {
            var lsw = (x & 0xFFFF) + (y & 0xFFFF);
            var msw = (x >> 16) + (y >> 16) + (lsw >> 16);
            return (msw << 16) | (lsw & 0xFFFF);
        }
        function sha1_ft(t, b, c, d) {
            if (t < 20) return (b & c) | ((~b) & d);
            if (t < 40) return b ^ c ^ d;
            if (t < 60) return (b & c) | (b & d) | (c & d);
            return b ^ c ^ d;
        }
        function sha1_kt(t) {
            return (t < 20) ? 1518500249 : (t < 40) ? 1859775393 : (t < 60) ? -1894007588 : -899497514;
        }
        function core_sha1(x, len) {
            x[len >> 5] |= 0x80 << (24 - len % 32);
            x[((len + 64) >>> 9 << 4) + 15] = len;
            var w = new Array(80);
            var a = 1732584193, b = -271733879, c = -1732584194, d = 271733878, e = -1009589776;
            for (var i = 0; i < x.length; i += 16) {
                var olda = a, oldb = b, oldc = c, oldd = d, olde = e;
                for (var j = 0; j < 80; j++) {
                    if (j < 16) w[j] = x[i + j];
                    else w[j] = rol(w[j - 3] ^ w[j - 8] ^ w[j - 14] ^ w[j - 16], 1);
                    var t = safe_add(safe_add(rol(a, 5), sha1_ft(j, b, c, d)), safe_add(safe_add(e, w[j]), sha1_kt(j)));
                    e = d; d = c; c = rol(b, 30); b = a; a = t;
                }
                a = safe_add(a, olda); b = safe_add(b, oldb); c = safe_add(c, oldc); d = safe_add(d, oldd); e = safe_add(e, olde);
            }
            return [a, b, c, d, e];
        }
        function str2binb(str) {
            var bin = [];
            var mask = (1 << 8) - 1;
            for (var i = 0; i < str.length * 8; i += 8) {
                var idx = i >> 5;
                if (bin[idx] === undefined) bin[idx] = 0;
                bin[idx] |= (str.charCodeAt(i / 8) & mask) << (24 - i % 32);
            }
            return bin;
        }
        function binb2str(bin) {
            var str = "";
            var mask = (1 << 8) - 1;
            for (var i = 0; i < bin.length * 32; i += 8) {
                str += String.fromCharCode((bin[i >> 5] >>> (24 - i % 32)) & mask);
            }
            return str;
        }
        function bin_sha1(str) { return binb2str(core_sha1(str2binb(str), str.length * 8)); }
        function bin_hmac_sha1(key, data) {
            var b = 64;
            if (key.length > b) key = bin_sha1(key);
            var keyPad = key;
            while (keyPad.length < b) { keyPad += String.fromCharCode(0); }
            var i_pad = "", o_pad = "";
            for (var i = 0; i < b; i++) {
                i_pad += String.fromCharCode(keyPad.charCodeAt(i) ^ 0x36);
                o_pad += String.fromCharCode(keyPad.charCodeAt(i) ^ 0x5C);
            }
            return bin_sha1(o_pad + bin_sha1(i_pad + data));
        }
        function toHex(num) { return ('00000000' + (num >>> 0).toString(16)).slice(-8).toUpperCase(); }

        function generateSonyHash(cid) {
            var base = cid.substring(0, 9) + "_00";
            var msg = base.substring(0, 12);
            var h = bin_hmac_sha1(tmdb_hmac_key_str, msg);
            var hashBytes = [];
            for (var i = 0; i < 20; i++) hashBytes[i] = h.charCodeAt(i);
            var p1a = (hashBytes[0] << 24) | (hashBytes[1] << 16) | (hashBytes[2] << 8) | hashBytes[3];
            var p1b = (hashBytes[4] << 24) | (hashBytes[5] << 16) | (hashBytes[6] << 8) | hashBytes[7];
            var p2a = (hashBytes[8] << 24) | (hashBytes[9] << 16) | (hashBytes[10] << 8) | hashBytes[11];
            var p2b = (hashBytes[12] << 24) | (hashBytes[13] << 16) | (hashBytes[14] << 8) | hashBytes[15];
            var p3 = (hashBytes[16] << 24) | (hashBytes[17] << 16) | (hashBytes[18] << 8) | hashBytes[19];
            return base + "_" + toHex(p1a) + toHex(p1b) + toHex(p2a) + toHex(p2b) + toHex(p3);
        }

        function scrollToTop() {
            window.scrollTo(0, 0);
        }

        function sort(lines, algo) {
            for (var i = 0; i < lines.length; i++) {
                for (var j = 0; j < lines.length - i - 1; j++) {
                    if (algo(lines[j], lines[j + 1])) {
                        var temp = lines[j];
                        lines[j] = lines[j + 1];
                        lines[j + 1] = temp;
                    }
                }
            }
            return lines;
        }

        function makeRap(row) {
            var hex = row[4];
            var contentID = row[5];

            if (!hex) {
                return "";
            }

            if (hex == "NOT REQUIRED") {
                return '<span style="color: lime;">RAP Not Required</span>'; 
            }

            if (hex == "MISSING") {
                return '<span style="color: red;">Missing RAP</span>';
            }
            return '<a download="' + contentID + '.rap" href="https://ps3-pro.github.io/License-Files/files/' + contentID + '.rap">RAP</a>';
        }

        function formatFileSize(bytes) {
            var safeBytesString = String(bytes).replace(/^\s+|\s+$/g, '');
            var cleanedBytes = parseFloat(safeBytesString);
            var colorStyle = 'style="color: #AAAAAA;"';

            if (isNaN(cleanedBytes) || cleanedBytes <= 0) return '';

            var GB = 1073741824;
            var MB = 1048576;
            var KB = 1024;

            if (cleanedBytes >= GB) {
                var size = cleanedBytes / GB;
                return '<span ' + colorStyle + '>(' + size.toFixed(2) + ' GB)</span>';
            } else if (cleanedBytes >= MB) {
                var size = cleanedBytes / MB;
                return '<span ' + colorStyle + '>(' + size.toFixed(2) + ' MB)</span>';
            } else if (cleanedBytes >= KB) {
                var size = cleanedBytes / KB;
                return '<span ' + colorStyle + '>(' + size.toFixed(2) + ' KB)</span>';
            } else {
                return '<span ' + colorStyle + '>(' + cleanedBytes + ' B)</span>';
            }
        }

        function loadChunkCovers() {
    var imgs = document.querySelectorAll('#list.grid img[data-src]');

    for (var i = 0; i < imgs.length; i++) {
        (function(img) {

            var ghUrl = img.getAttribute('data-src');
            var cid   = img.getAttribute('data-cid');

            if (!ghUrl) return;

            var testImg = new Image();

            // TENTA GITHUB PRIMEIRO
            testImg.onload = function () {
                img.src = ghUrl;
                img.removeAttribute('data-src');
            };

            testImg.onerror = function () {

                // FALLBACK SONY
                if (cid) {
                    try {
                        var hash = generateSonyHash(cid);
                        var sonyUrl = "http://tmdb.np.dl.playstation.net/tmdb/" + hash + "/ICON0.PNG";

                        // SE NÃO FOR PS3 → usa proxy seguro
                        if (!isPS3) {
                            var clean = sonyUrl.replace(/^http:\/\//i, '');
                            sonyUrl = "https://images.weserv.nl/?url=" + clean + "&output=png";
                        }

                        var sonyTest = new Image();

                        sonyTest.onload = function () {
                            img.src = sonyUrl; // Funcionou → usa SONY
                        };

                        sonyTest.src = sonyUrl;

                    } catch(e) {}
                }

                img.removeAttribute('data-src'); // evita loop
            };

            // INICIA teste de GitHub
            testImg.src = ghUrl;

        })(imgs[i]);
    }
}

       function renderChunk() {
    var list = document.getElementById('list');
    var chunk = g_allMatches.slice(g_currentChunkIndex, g_currentChunkIndex + g_chunkSize);
    var htmlChunk = "";

    if (chunk.length === 0) {
        if (g_currentChunkIndex === 0) {
            list.innerHTML = useCoverGUI ? 
                '<div style="color:#fff;font-size:20px;padding:100px;">No items found.</div>' : 
                '<li>No items found.</li>';
        }
        return;
    }

    for (var i = 0; i < chunk.length; i++) {
        var a = chunk[i];
        if (!a[3] || a[3] === "MISSING") continue;

        var size = formatFileSize(a[a.length-1] || a[a.length-2] || "");

        if (useCoverGUI) {

            var coverUrl = "https://ps3-pro.github.io/PSN-Content/resources/covers/PS3/" + a[0] + ".JPG";

            htmlChunk += '<div class="game-tile">' +
                '<img src="'+defaultCover+'" ' +
                    'data-src="'+coverUrl+'" ' +
                    'data-cid="'+a[4]+'" ' + // ← NECESSÁRIO PRO SONY
                    'name="cover_'+a[0]+'" ' +
                    'style="width:120px;height:140px;border-radius:4px;">' +
                '<div class="title">'+a[2]+'</div>' +
                '<div class="title-id">['+a[0]+']</div>' +
                '<div class="size">'+size+'</div>' +
                '<div class="links"><a href="'+a[3]+'">PKG</a> '+makeRap(a)+'</div>' +
                '</div>';

        } else {

            var rawSize = a[a.length-1];
            if (isNaN(parseFloat(rawSize)) && a.length > 1) rawSize = a[a.length-2];
            var fileSize = formatFileSize(rawSize);

            htmlChunk += '<li>' +
                a[2] + 
                ' <span style="color: #ffff00;">[' + a[0] + ']</span>' +
                ' ' + fileSize + 
                ' <a href="' + a[3] + '">PKG</a> ' +
                makeRap(a) +
                '</li>';
        }
    }

    list.innerHTML += htmlChunk;

    g_currentChunkIndex += g_chunkSize;

    // CHAMAR O CARREGAMENTO DAS CAPAS AQUI
    loadChunkCovers();


            if (g_currentChunkIndex < g_allMatches.length) {
                setTimeout(renderChunk, 0);
            }
        }

        function render() {
            f.send.disabled = DB.length == 0;
            f.query.placeholder = DB.length + " items found";

            var regionRule = (g_regionFilter == "ALL") ? new RegExp(".*") : new RegExp("^" + g_regionFilter + "$", 'i');
            var isSearch = (g_letterFilter.length > 0 && g_letterFilter[0] != '^');
            var letterRule = g_letterFilter == "" ? new RegExp(".*") : new RegExp(g_letterFilter, 'i');
            var maxResults = isSearch ? 99 : 999;
            var matches = [];

            for (var i = 0; i < DB.length && matches.length < maxResults; i++) {
                var row = DB[i];
                if (!row[2]) continue;
                var nameMatches = (g_letterFilter == "" || (isSearch ? (row[2] && letterRule.test(row[2])) || row[0] == g_letterFilter : (row[2] && letterRule.test(row[2]))));
                var regionMatches = (g_regionFilter == "ALL" || (row[1] && regionRule.test(row[1])));
                if (nameMatches && regionMatches) matches.push(row);
            }

            sort(matches, function (a, b) { return a[2] > b[2]; });

            g_allMatches = matches;
            g_currentChunkIndex = 0;

            var list = document.getElementById('list');
            list.innerHTML = '';

            list.className = useCoverGUI ? "grid" : "";
            list.style.cssText = useCoverGUI ? "padding:10px 110px;background:transparent;" : "";

            renderChunk();

            var regionText = (g_regionFilter == "ALL") ? "All Regions" : g_regionFilter;
            document.getElementById('count').textContent = "Displaying " + matches.length + " items | " + regionText;
        }

        try {
            function fetchDB() {
                f.fetch.disabled = true;
                var xhr = new XMLHttpRequest();
                xhr.onabort = xhr.ontimeout = xhr.onerror = function () {
                    alert("Error loading DB");
                    f.fetch.disabled = false;
                };
                xhr.onload = function () {
                    if (xhr.status != 200) {
                        alert("Status " + xhr.status);
                        f.fetch.disabled = false;
                        return;
                    }

                    var lines = xhr.responseText.split("\n");
                    DB = [];
                    for (var i = 0; i < lines.length; i++) {
                        DB.push(lines[i].split("\t"));
                    }

                    if (window.localStorage) {
                        localStorage.DB = JSON.stringify(DB);
                    }

                    f.fetch.disabled = false;
                    render();

                    if (g_startupAlertMessage) {
                        setTimeout(function () {
                            alert(g_startupAlertMessage);
                            g_startupAlertMessage = null;

                            if (isPS3 && typeof loadFlashPlayer === 'function') {
                                loadFlashPlayer();
                            }

                        }, 1000);
                    }
                };

                xhr.open('GET', dbPath);
                xhr.send();
            }

            document.getElementById("cover-gui").onclick = function () {
                useCoverGUI = this.checked;

                if (isPS3) {
                    if (useCoverGUI) {
                        stopFlashPlayer();
                    } else {
                        startFlashPlayer();
                    }
                }

                document.getElementById('list').innerHTML = useCoverGUI ?
                    '<div style="text-align:center;padding:50px;color:#fff;">Switching to Cover GUI...</div>' :
                    '<li>Switching to list view...</li>';
                setTimeout(render, 300);
                scrollToTop();
            };

            function triggerReload() {
                document.getElementById('list').innerHTML = '<li>Reloading database... Please wait.</li>';
                document.getElementById('count').textContent = "Reloading | " + g_regionFilter;

                fetchDB();
            }

            function setFilter(type, value, clickedElement) {
                if (type == 'letter') {
                    g_letterFilter = value;
                    f.query.value = "";

                    var links = document.getElementById("letters").getElementsByTagName("a");
                    for (var i = 0; i < links.length; i++) {
                        links[i].className = "";
                    }
                }
                else if (type == 'region') {
                    g_regionFilter = value;

                    var links = document.getElementById("region-links").getElementsByTagName("a");
                    for (var i = 0; i < links.length; i++) {
                        links[i].className = "";
                    }
                }
                else if (type == 'search') {
                    g_letterFilter = value;

                    var links = document.getElementById("letters").getElementsByTagName("a");
                    for (var i = 0; i < links.length; i++) {
                        links[i].className = "";
                    }
                }

                if (clickedElement) {
                    clickedElement.className = "active";
                }

                var loadingHTML = useCoverGUI ?
                    '<li>Filtering database... Please wait.</li>' :
                    '<li>Filtering database... Please wait.</li>';

                document.getElementById('list').innerHTML = loadingHTML;
                document.getElementById('count').textContent = "Filtering | " + g_regionFilter;

                setTimeout(render, 300);
                scrollToTop();
            }

            function createLetterLinks() {
                var links = '<a href="#" onclick="setFilter(\'letter\', \'^[0-9]\', this); return false;">[0-9]</a>';
                for (var c = 65; c < 91; c++) {
                    var letra = String.fromCharCode(c);
                    links += '<a href="#" onclick="setFilter(\'letter\', \'^' + letra + '\', this); return false;">' + letra + '</a>';
                }
                document.getElementById("letters").innerHTML = links;
            }
            createLetterLinks();

            function selectCategory(cat) {
                switch (cat) {
                    case "games": dbPath = "https://ps3-pro.github.io/PSN-Content/resources/database/games.tsv"; break;
                    case "avatars": dbPath = "https://ps3-pro.github.io/PSN-Content/resources/database/avatars.tsv"; break;
                    case "demos": dbPath = "https://ps3-pro.github.io/PSN-Content/resources/database/demos.tsv"; break;
                    case "dlcs": dbPath = "https://ps3-pro.github.io/PSN-Content/resources/database/dlcs.tsv"; break;
                    case "themes": dbPath = "https://ps3-pro.github.io/PSN-Content/resources/database/themes.tsv"; break;
                }

                DB = [];
                if (window.localStorage) localStorage.removeItem("DB");

                g_letterFilter = "";
                g_regionFilter = "ALL";
                f.query.value = "";

                if (g_defaultLetterFilter) {
                    g_letterFilter = g_defaultLetterFilter;
                }

                var i;
                var letras = document.getElementById("letters").getElementsByTagName("a");
                for (i = 0; i < letras.length; i++) letras[i].className = "";

                var regioes = document.getElementById("region-links").getElementsByTagName("a");
                for (i = 0; i < regioes.length; i++) regioes[i].className = "";
                if (regioes[0]) regioes[0].className = "active";

                createLetterLinks();

                if (isPS3 && g_defaultLetterFilter == '^[0-9]') {
                    var links = document.getElementById("letters").getElementsByTagName("a");
                    if (links.length > 0) {
                        links[0].className = "active";
                    }
                }

                var menu = document.getElementById("selection-menu").getElementsByTagName("a");
                for (i = 0; i < menu.length; i++) {
                    menu[i].className = menu[i].className.replace("active", "");
                }
                var ids = { games: "ln-game", avatars: "ln-avatar", demos: "ln-demos", dlcs: "ln-dlcs", themes: "ln-themes" };
                var el = document.getElementById(ids[cat]);
                if (el) el.className += " active";

                document.getElementById('list').innerHTML = '<li>Downloading database... Please wait.</li>';
                document.getElementById('count').textContent = "Loading...";

                fetchDB();
                scrollToTop();
            }

            document.getElementById("ln-avatar").onclick = function () { selectCategory("avatars"); return false; };
            document.getElementById("ln-demos").onclick = function () { selectCategory("demos"); return false; };
            document.getElementById("ln-dlcs").onclick = function () { selectCategory("dlcs"); return false; };
            document.getElementById("ln-game").onclick = function () { selectCategory("games"); return false; };
            document.getElementById("ln-themes").onclick = function () { selectCategory("themes"); return false; };

            if (isPS3) {
                document.body.className += " is-ps3";
                g_defaultLetterFilter = "^[0-9]";
                g_useCoverGUI = false;

                g_startupAlertMessage = [
                    "Welcome to the PlayStation™ Database",
                    "",
                    "Save the downloads in (System Storage) > [Packages]",
                    "and install via [Package Manager].",
                    "",
                    "For PSP™ and minis titles, install the package through [Package Manager] first, then access it afterward via (Package Manager) > [PlayStation™ Network Content]."
                ].join("\n");
            } else {
                document.body.className += " is-pc";
                g_useCoverGUI = true;
                useCoverGUI = true;
            }

            document.getElementById('cover-gui').checked = useCoverGUI;
            selectCategory("games");

            var links = document.getElementById("letters").getElementsByTagName("a");
            if (isPS3 && links.length > 0) {
                links[0].className = "active";
            }

            try {
                var rainbowColors = ["#FF0000", "#FF7F00", "#FFFF00", "#00FF00", "#00FFFF", "#9400D3"];
                var idx = 0;
                setInterval(function () {
                    var btn = document.getElementById("license-link-rainbow");
                    if (btn) {
                        btn.style.color = rainbowColors[idx];
                        idx = (idx + 1) % rainbowColors.length;
                    }
                }, 200);
            } catch (e) { }
        } catch (a) {
            alert(a);
        }
</script>


	<script type="text/javascript" src="https://github.com/PS3-Pro/Pages/raw/main/resources/scripts/flash_objects.js"></script>
		<div id="player_9428" align="center"></div>
	<script>
			var flashvars_9428_config = {
				quality: "very-low",
				wmode: "transparent",
				bgcolor: "#ffffff",
				allowScriptAccess: "always",
				allowFullScreen: "true",
				flashvars: "url=https://github.com/PS3-Pro/Whats-New/raw/main/media/ads/hall_of_fame.mp3&autostart=yes"
			};
			var flashObjectAttributes_9428 = {};
	
			function loadFlashPlayer() {
				flashObject("https://github.com/PS3-Pro/Pages/raw/main/resources/swf/music_player/music_player_4.swf", 
					"player_9428", 
					"600", 
					"35", 
					"8", 
					false, 
					{},
					flashvars_9428_config,
					flashObjectAttributes_9428
				);
			}
			
			function stopFlashPlayer() {
				var playerContainer = document.getElementById('player_9428');
				if (playerContainer) {
					while (playerContainer.firstChild) {
						playerContainer.removeChild(playerContainer.firstChild);
					}
				}
			}
			
			function startFlashPlayer() {
				var playerContainer = document.getElementById('player_9428');
				if (playerContainer && playerContainer.children.length === 0) {
					loadFlashPlayer();
				}
			}
		</script>
		
		<script>
			var invisibleAudio = document.getElementById('invisible-audio');
			var isPS3 = /PS3|PlayStation 3|NetFront/i.test(navigator.userAgent);
			
			var audioStarted = false;
		
			function startAudio() {
				if (!isPS3 && invisibleAudio && !audioStarted) {
					invisibleAudio.volume = 0.2;
					invisibleAudio.play()
						.then(() => {
							audioStarted = true;
						})
						.catch(error => {
						});
				}
			}
			
			document.addEventListener('DOMContentLoaded', function() {
				var pcOverlay = document.getElementById('welcome-overlay-pc');
				var continueBtn = document.getElementById('overlay-continue-btn');
				
				if (!isPS3 && continueBtn) {
					continueBtn.addEventListener('click', function() {
						startAudio();
						if (pcOverlay) pcOverlay.style.display = 'none';
					});
				}
				
			});
		</script>
   </body>
</html>