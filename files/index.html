<!-- Coded for PS3™ Pro by Luan Teles -->
<html>
   <head>
      <title>PlayStation&trade; Network Database</title>
   </head>
   <script>
      javascript:window.resizeTo(screen.width,screen.height)
   </script>
   <style>
      html, body {
         margin: 0;
         padding: 0;
         height: 100%;
         background: url("https://ps3-pro.github.io/PSN-Content/resources/media/background.png") no-repeat center center fixed;
         background-size: cover;
         color: #fff;
         font-family: Arial, sans-serif;
         text-align: center;
      }
      
      header {
         position: fixed;
         top: 0;
         left: 0;
         right: 0;
         height: 130px;
         padding: 10px 15px;
         background: rgba(0, 0, 0, 0.6);
         text-align: center;
         font-size: 12px;
         font-weight: bold;
         border-bottom: 2px solid #888;
         display: block;
         z-index: 2;
      }
      
      header a {
         font-size: 3em;
         color: #ffffff;
         text-decoration: none;
         font-weight: bold;
         display: block;
      }
      
      header a:hover {
         color: #66ccff;
      }
	  

	header form {
		display: flex;
		align-items: center;
		justify-content: center;
		gap: 10px;
		white-space: nowrap; /* CORREÇÃO: Impede que o conteúdo do formulário quebre a linha */
	}
	
	header #cover-toggle {
		font-size: 1.2em;
		padding: 6px 10px; 
		background: rgba(0, 0, 0, 0.6);
		border: 1px solid #aaa;
		border-radius: 5px;
		cursor: pointer;
		display: inline-block;
		vertical-align: middle; 
	}
	
	header #cover-toggle label {
		display: flex;
		align-items: center;
		gap: 5px;
		margin: 0;
	}
      
      #selection-menu {
         position: fixed;
         top: 128px;
         left: 0;
         right: 0;
         height: 28px;
         background: rgba(0,0,0,0.0);
         display: flex;
         justify-content: center;
         align-items: center;
         gap: 10px;
         z-index: 6;
         font-size: 1em;
      }
      
      #selection-menu a {
         color: #fff;
         text-decoration: none;
         font-weight: bold;
         margin-left: 10px;
         margin-right: 10px;
      }
      
      #selection-menu a:hover {
         color: #66ccff;
      }
      
      form {
         margin: 10px auto;
      }
      
      input[type="search"],
      input[type="submit"],
      input[type="button"] {
         font-size: 1.2em;
         padding: 6px 10px;
         background: rgba(0, 0, 0, 0.6);
         border: 1px solid #aaa;
         border-radius: 5px;
         cursor: pointer;
      }
      
      input[type="submit"],
      input[type="button"] {
         color: #fff;
         margin-left: 5px;
      }
      
      input[type="search"] {
         width: 250px;
         color: #00008B;
      }
      
      button {
         margin: 2px;
         background: rgba(0, 0, 0, 0.6);
         border: 1px solid #aaa;
         color: #fff;
         border-radius: 4px;
         font-size: 1em;
         padding: 3px 6px;
      }
      
      button:hover {
         background: rgba(255, 255, 255, 0.1);
      }
      
      #main {
         width: 100%;
         height: 100%;
         position: relative;
         top: 170px;
      }
      
      .sidebar {
         position: fixed;
         top: 150px;
         bottom: 0;
         left: 0;
         width: 80px;
         height: 100vh;
         background: rgba(0, 0, 0, 0.6);
         padding: 0 5px 5px 5px;
         box-sizing: border-box;
         border-right: 2px solid #888;
         z-index: 3;
      }
      
      .is-ps3 .sidebar-top-border {
         position: fixed;
         top: 152px;
         bottom: 0;
         left: 5px;
         width: 90px;
         height: 2px;
         background: rgba(0, 8, 30, 1);
         margin-top: -2px;
         margin-left: -7px;
         z-index: 4;
      }
      
      .is-pc .sidebar-top-border {
         position: fixed;
         top: 152px;
         bottom: 0;
         left: -5px;
         width: 90px;
         height: 2px;
         background: rgba(0, 8, 30, 1);
         margin-top: -2px;
         margin-left: -7px;
         z-index: 4;
      }
      
      .sidebar-right {
         position: fixed;
         top: 150px;
         bottom: 0;
         right: 0;
         width: 80px;
         height: 100vh;
         background: rgba(0, 0, 0, 0.6);
         padding: 0 5px 5px 5px;
         box-sizing: border-box;
         border-left: 2px solid #888;
         z-index: 3;
      }
      
      .is-ps3 .sidebar-right-top-border {
         position: fixed;
         top: 152px;
         right: 5px;
         width: 90px;
         height: 2px;
         background: rgba(7, 5, 60, 0.7);
         margin-top: -2px;
         margin-right: -7px;
         z-index: 4;
      }
      
      .is-pc .sidebar-right-top-border {
         position: fixed;
         top: 152px;
         right: -5px;
         width: 90px;
         height: 2px;
         background: rgba(7, 5, 60, 0.7);
         margin-top: -2px;
         margin-right: -7px;
         z-index: 4;
      }
      
      .sidebar ul, .sidebar-right ul {
         list-style: none;
         padding: 0;
         margin: 0;
      }
      
      .sidebar ul li, .sidebar-right ul li {
         margin: 5px 0;
      }
      
      .sidebar ul li a, .sidebar-right ul li a {
         text-decoration: underline;
         display: block;
         color: #ffffff;
      }
      
      .sidebar ul li a:hover, .sidebar-right ul li a:hover {
         color: #ffff00;
      }
      
      .sidebar ul li a:active, .sidebar-right ul li a:active {
         color: #0000ff;
      }
      
      .sidebar-heading-left {
         color: #FFFFFF;
         font-weight: bold;
         font-size: 1.2em;
         margin-top: 0px;
         text-align: center;
      }
      
      .sidebar-heading-right {
         color: #FFFFFF;
         font-weight: bold;
         font-size: 1.2em;
         margin-top: 0px;
         text-align: center;
      }
      
      #letters {
         margin-top: 10px;
      }
      
      #letters a {
         width: 100%;
         text-align: center;
         margin: 2px 0;
         display: block;
         color: #ffffff;
         text-decoration: underline;
      }
      
      #letters a.active, #region-links a.active {
         color: #66ccff;
         text-decoration: underline;
         font-weight: bold;
      }
      
      #letters a:hover {
         color: #ffff00;
      }
      
      #license-links {
         margin-top: 20px;
      }
      
      #region-links {
         margin-top: 10px;
      }
      
      #region-links a {
         width: 100%;
         text-align: center;
         margin: 2px 0;
         display: block;
         color: #ffffff;
      }
      
      #license-links a {
         width: 100%;
         text-align: center;
         margin: 2px 0;
         display: block;
         color: #ffffff;
      }
      
      .content {
         padding-right: 0px;
         text-align: center;
         margin-left: 80px;
         margin-right: 80px;
         display: flex;
         justify-content: center;
         min-height: calc(100vh - 170px);
		 padding-bottom: 20px;
      }
      
      ul#list {
         max-width: 1760px;
         min-width: 400px;
         list-style: none;
         padding: 10px 20px;
         margin: 0 auto;
         text-align: left;
         font-size: 1em;
         background: rgba(0, 0, 0, 0.5);
         border-radius: 10px;
         display: inline-block;
         vertical-align: top;
      }
      
      ul#list li {
		display: block;
        padding: 8px 10px;
        border-bottom: 1px solid #333;
		<!-- transition: padding 0.25s ease, background 0.25s ease, font-size 0.25s ease; -->
	  }
	
	 ul#list li:hover {
		position: relative;
		font-size: 1.05em !important;
		padding: 12px 14px !important;
		background: rgba(102, 204, 255, 0.15) !important;
		border-color: #66ccff;
		box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
		z-index: 1;
		<!-- transform: scale(1.05); -->
	  }
      
      ul#list li a {
         text-decoration: none;
         color: #fff;
         display: inline;
         white-space: nowrap;
      }
      
      ul#list li a:hover {
         text-decoration: underline;
         color: #66ccff;
      }
      
      [download] {
         background: #fff;
         color: #000 !important;
         padding: 2px 6px;
         margin-left: 5px;
         text-decoration: none;
         border-radius: 3px;
         font-size: 0.9em;
         display: inline;
         white-space: nowrap;
      }
      
      #icon {
         width: 64px;
         height: auto;
         margin: 10px auto;
      }
      
      ::-webkit-scrollbar {
         width: 8px;
      }
      
      ::-webkit-scrollbar-track {
         background: transparent;
      }
      
      ::-webkit-scrollbar-thumb {
         background: #aaa;
      }
      
      #backToTop {
         position: fixed;
         bottom: 20px;
         right: 110px;
         padding: 10px 16px;
         background: rgba(0, 0, 0, 0.7);
         color: white;
         font-weight: bold;
         border: 2px solid #888;
         border-radius: 8px;
         cursor: pointer;
         z-index: 15;
      }
      
      #backToTop:hover {
         background: rgba(255, 255, 255, 0.1);
      }
      
      #selection-menu a.active {
         color: #66ccff;
         text-decoration: underline;
      }
	  
	  #player_9428,#player_9428 object,#player_9428 embed {
		position: absolute !important;
		left: -9999px !important;
		top: -9999px !important;
		width: 1px !important;
		height: 1px !important;
		opacity: 0 !important;
		pointer-events: none !important;
		visibility: hidden !important;
	  }
	  
	  <!-- PC Overlay -->
	  #pc-audio-player-invisible {
		position: absolute !important;
		left: -9999px !important;
		top: -9999px !important;
		width: 1px !important;
		height: 1px !important;
		opacity: 0 !important;
		pointer-events: none !important;
		visibility: hidden !important;
	}
	
	#welcome-overlay-pc {
		position: fixed;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		background: rgba(0, 0, 0, 0.9);
		color: white;
		z-index: 9999;
		display: none; 
		justify-content: center;
		align-items: center;
		text-align: center;
	}
	
	body.is-pc #welcome-overlay-pc {
		display: flex;
	}
	
	#welcome-overlay-pc .dialog-box {
		background: rgba(0, 0, 0, 0.7);
		padding: 30px;
		border: 2px solid #888;
		border-radius: 10px;
		max-width: 500px;
	}
	
	#welcome-overlay-pc .dialog-box h2 {
		color: #66ccff;
		margin-top: 0;
	}
	
	#welcome-overlay-pc .dialog-box p {
		white-space: pre-wrap;
		margin-bottom: 20px;
	}
	
	#overlay-continue-btn {
		background: #007bff;
		color: white;
		border: none;
		padding: 10px 20px;
		font-size: 1.2em;
		cursor: pointer;
		border-radius: 5px;
	}
	
	<!-- GameUI -->
	#list.grid {
        font-size: 0;
        text-align: center;
        background: transparent;
        padding: 10px
    }
	
	ul#list.grid {
		text-align: center; 
		background: transparent; 
		padding: 10px;
		padding-right: 110px;
		padding-left: 110px;
	}
    .game-tile {
        display: inline-block;
        width: 140px;
        margin: 8px;
        background: rgba(0, 0, 0, 0.6);
        border: 1px solid #888;
        border-radius: 6px;
        padding: 8px;
        text-align: center;
        vertical-align: top;
        font-size: 12px
    }

    .game-tile:hover {
        background: rgba(255, 255, 255, 0.1);
        border-color: #66ccff;
        transform: translateY(-2px);
    }

    .game-tile img {
        width: 120px;
        height: 140px;
        border-radius: 4px
    }

    .game-tile .title {
        font-weight: bold;
        font-size: 11px;
        overflow: hidden;
        margin: 6px 0 2px;
        line-height: 1.2
		height: 27px;
		text-overflow: ellipsis;
    }

	.game-tile .title-id {
		color: #ffff00 !important;
		font-size: 10px;
		margin-bottom: 8px;
	}
	
	.game-tile .size {
		color: #aaa; 
		font-size: 10px
	}

    .game-tile .links {
        margin-top: 4px;
        font-size: 10px
    }

    .game-tile .links a {
        color: #fff;
        margin: 0 3px
    }

    .game-tile .links a:hover {
        color: #66ccff;
        text-decoration: underline !important;
    }
	
	.game-tile .links a[href$=".pkg"],
	ul#list li a[href$=".pkg"] {
		background: #007bff;
		text-decoration: none;
		color: #fff !important;
		padding: 2px 6px;
		margin-left: 10px; 
		border-radius: 4px;
		font-size: 0.9em;
		display: inline-block;
		white-space: nowrap;
		border: 1px solid #0056b3;
		transition: background-color 0.2s;
	}
	
	.game-tile .links a[href$=".pkg"]:hover,
	ul#list li a[href$=".pkg"]:hover {
		background: #0056b3;
		text-decoration: none;
		color: #fff !important;
		text-decoration: underline !important;
	}
	
	ul#list:not(.grid) li a[href$=".pkg"]:hover {
    text-decoration: underline !important;
}
	
   </style>
   <body>
      <header>
         <a href="">PlayStation&trade; Network Database</a>
         <div id="count" aria-live="polite" role="status">Loading</div>
         <form name="engine" onsubmit="setFilter('search', this.query.value, null); return false;">
            <input type="search" name="query" size="25" placeholder="Search">
            <input type="submit" name="send" value="Search" disabled>
            <input type="button" id="license-link-rainbow" value="License Pack" onclick="window.location.href='https://github.com/PS3-Pro/License-Files/releases/download/Licenses/License_Pack_Bin.pkg'">
            <input type="button" name="fetch" value="Reload DB" onclick="triggerReload()">
			<div id="cover-toggle"><label><input type="checkbox" id="cover-gui">Cover GUI</label></div>
         </form>
      </header>
	  
		<div id="welcome-overlay-pc">
			<div class="dialog-box">
				<h2>PlayStation™ Network Database</h2>
				<p>Your browser may block the download of files.
If this happens, right-click the game name and choose 'Save link as' to download manually.
				</p>
				<button id="overlay-continue-btn">
					Continue
				</button>
			</div>
		</div>
      
		<div id="selection-menu" aria-hidden="false">
			<a href="#" id="ln-avatar">Avatars</a>
			<a href="#" id="ln-demos">Demos</a>
			<a href="#" id="ln-dlcs">DLCs</a>
			<a href="#" id="ln-game">Games</a>
			<a href="#" id="ln-themes">Themes</a>
		</div>
		
		<div id="main">
			<div class="sidebar" id="sidebar">
				<div class="sidebar-top-border"></div>      
				<div class="sidebar-heading-left">Filter</div>
				<ul id="letters"></ul>
			</div>
			
			<div class="content">
				<ul id="list"></ul>
			</div>
         
         <div class="sidebar-right" id="sidebar-right">
            <div class="sidebar-right-top-border"></div>
            <div class="sidebar-heading-right">Region</div>
            <br>
            <ul id="region-links">
               <li><a href="#" class="active" onclick="setFilter('region', 'ALL', this); return false;">All</a></li>
               <li><a href="#" onclick="setFilter('region', 'US', this); return false;">US</a></li>
               <li><a href="#" onclick="setFilter('region', 'EU', this); return false;">EU</a></li>
               <li><a href="#" onclick="setFilter('region', 'JP', this); return false;">JP</a></li>
               <li><a href="#" onclick="setFilter('region', 'ASIA', this); return false;">ASIA</a></li>
            </ul>
         </div>
         
         <button id="backToTop" onclick="scrollToTop()">&#8593; Top</button>
      </div>
	  
	  <div id="pc-audio-player-invisible" align="center">
		<audio id="invisible-audio" autoplay loop>
			<source src="https://github.com/PS3-Pro/Whats-New/raw/main/media/ads/hall_of_fame.mp3" type="audio/mpeg">
		</audio>
	  </div>

	<div id="player_9428" align="center"></div>
      
		<script>
        var g_startupAlertMessage = null;
		var g_letterFilter = "";
		var g_regionFilter = "ALL";
		var useCoverGUI = false;
		var defaultCover = "https://raw.githubusercontent.com/SvenGDK/PSMT-Covers/refs/heads/main/PS3/NPUB30323.JPG";
		
		var g_defaultLetterFilter = "";
		
		var f = document.forms.engine;
		var dbPath = "https://ps3-pro.github.io/PSN-Content/resources/database/games.tsv";
		var DB = window.localStorage ? JSON.parse(localStorage.DB || '[]') : [];
	
		function scrollToTop() {
			window.scrollTo(0, 0);
		}
	
		function sort(lines, algo) {
			for (var i = 0; i < lines.length; i++) {
				for (var j = 0; j < lines.length - i - 1; j++) {
					if (algo(lines[j], lines[j + 1])) {
						var temp = lines[j];
						lines[j] = lines[j + 1];
						lines[j + 1] = temp;
					}
				}
			}
			return lines;
		}

         try {
             function makeRap(row) {
				var hex = row[4];
				var contentID = row[5];
		
				if (!hex) {
					return "";
				}
		
				if (hex == "NOT REQUIRED") {
					return '<span style="color: lime;">RAP Not required</span>'; 
				}
		
				if (hex == "MISSING") {
					return '<span style="color: red;">Missing RAP</span>';
				}
				return '<a download="' + contentID + '.rap" href="https://ps3-pro.github.io/License-Files/files/' + contentID + '.rap">RAP</a>';
			}

             function formatFileSize(bytes) {
				var safeBytesString = String(bytes).replace(/^\s+|\s+$/g, '');
				var cleanedBytes = parseFloat(safeBytesString);
				var colorStyle = 'style="color: #AAAAAA;"';
		
				if (isNaN(cleanedBytes) || cleanedBytes <= 0) return '';
		
				var GB = 1073741824; // 1024 * 1024 * 1024
				var MB = 1048576;   // 1024 * 1024
				var KB = 1024;     // 1024
		
				if (cleanedBytes >= GB) {
					var size = cleanedBytes / GB;
					return '<span ' + colorStyle + '>(' + size.toFixed(2) + ' GB)</span>';
				} else if (cleanedBytes >= MB) {
					var size = cleanedBytes / MB;
					return '<span ' + colorStyle + '>(' + size.toFixed(2) + ' MB)</span>';
				} else if (cleanedBytes >= KB) {
					var size = cleanedBytes / KB;
					return '<span ' + colorStyle + '>(' + size.toFixed(2) + ' KB)</span>';
				} else {
					return '<span ' + colorStyle + '>(' + cleanedBytes + ' B)</span>';
				}
			}

             function fetchDB() {
                 f.fetch.disabled = true;
                 var xhr = new XMLHttpRequest();
                 xhr.onabort = xhr.ontimeout = xhr.onerror = function () {
                     alert("Error loading DB");
                     f.fetch.disabled = false;
                 };
                 xhr.onload = function () {
                     if (xhr.status != 200) {
                         alert("Status " + xhr.status);
                         f.fetch.disabled = false;
                         return;
                     }
         
                     var lines = xhr.responseText.split("\n");
                     DB = [];
                     for (var i = 0; i < lines.length; i++) {
                         DB.push(lines[i].split("\t"));
                     }
         
                     if (window.localStorage) {
                         localStorage.DB = JSON.stringify(DB);
                     }
                     
                     f.fetch.disabled = false;
                     render();
         
                     if (g_startupAlertMessage) {
                         setTimeout(function() {
                             alert(g_startupAlertMessage);
                             g_startupAlertMessage = null;
                             
                             var isPS3 = /PS3|PlayStation 3|NetFront/i.test(navigator.userAgent);
                             if (isPS3 && typeof loadFlashPlayer === 'function') {
                                 loadFlashPlayer();
                             }
                             
                         }, 1000);
                     }
                 };
         
                 xhr.open('GET', dbPath);
                 xhr.send();
             }
         
             function render() {
				f.send.disabled = DB.length == 0;
				f.query.placeholder = DB.length + " items found";
			
				var regionRule = (g_regionFilter == "ALL") ? new RegExp(".*") : new RegExp("^"+g_regionFilter+"$", 'i');
				var isSearch = (g_letterFilter.length > 0 && g_letterFilter[0] != '^');
				var letterRule = g_letterFilter == "" ? new RegExp(".*") : new RegExp(g_letterFilter, 'i');
				var maxResults = isSearch ? 99 : 999;
				var matches = [];
			
				for (var i = 0; i < DB.length && matches.length < maxResults; i++) {
					var row = DB[i]; 
					if (!row[2]) continue;
					var nameMatches = (g_letterFilter == "" || (isSearch ? (row[2] && letterRule.test(row[2])) || row[0] == g_letterFilter : (row[2] && letterRule.test(row[2]))));
					var regionMatches = (g_regionFilter == "ALL" || (row[1] && regionRule.test(row[1])));
					if (nameMatches && regionMatches) matches.push(row);
				}

			sort(matches, function(a, b) { return a[2] > b[2]; });
		
			var html = "";
			var list = document.getElementById('list');
		
			if (useCoverGUI) {
				list.className = "grid";
				list.style.cssText = "padding:10px 110px;background:transparent;";
		
				for (var i = 0; i < matches.length; i++) {
					var a = matches[i];
					if (!a[3] || a[3] === "MISSING") continue;
		
					var size = formatFileSize(a[a.length-1] || a[a.length-2] || "");
		
					html += '<div class="game-tile">' +
							'<img src="'+defaultCover+'" name="cover_'+a[0]+'" style="width:120px;height:140px;border-radius:4px;">' +
							'<div class="title">'+a[2]+'</div>' +
							'<div class="title-id">['+a[0]+']</div>' +
							'<div class="size">'+size+'</div>' +
							'<div class="links"><a href="'+a[3]+'">PKG</a> '+makeRap(a)+'</div>' +
							'</div>';
				}
				if (html == "") html = '<div style="color:#fff;font-size:20px;padding:100px;">No items found.</div>';
				list.innerHTML = html;
		
				setTimeout(function() {
					for (var i = 0; i < matches.length; i++) {
						var img = document.getElementsByName("cover_"+matches[i][0])[0];
						if (!img) continue;
						var temp = new Image();
						temp.onload = (function(el) { return function() { el.src = this.src; }; })(img);
						temp.onerror = (function(el) { return function() { el.src = defaultCover; }; })(img);
						temp.src = "https://raw.githubusercontent.com/SvenGDK/PSMT-Covers/main/PS3/"+matches[i][0]+".JPG";
					}
				}, 200);
		
			} else {
				list.className = "";
				list.style.cssText = "";
		
				for (var i = 0; i < matches.length; i++) {
					var a = matches[i];
					var rawSize = a[a.length-1];
					if (isNaN(parseFloat(rawSize)) && a.length > 1) rawSize = a[a.length-2];
					var fileSize = formatFileSize(rawSize);
					if (a[3] && a[3] !== "MISSING") {
						var gameName = a[2]; 
						var contentIDHtml = '<span style="color: #ffff00;">[' + a[0] + ']</span>';
						var pkgButtonHtml = '<a href="' + a[3] + '">PKG</a>';
						html += '<li>' +
									gameName + 
									' ' + contentIDHtml +
									' ' + fileSize + 
									' ' + pkgButtonHtml +
									' ' + makeRap(a) +
								'</li>';
					}
				}
				if (html == "") html = "<li>No items found.</li>";
				list.innerHTML = html;
			}
		
			var regionText = (g_regionFilter == "ALL") ? "All Regions" : g_regionFilter;
			document.getElementById('count').textContent = "Displaying "+matches.length+" items | "+regionText;
			}
			
			document.getElementById("cover-gui").onclick = function() { // <-- CHAVE ABERTA AQUI
				useCoverGUI = this.checked;
				document.getElementById('list').innerHTML = useCoverGUI ? 
					'<div style="text-align:center;padding:50px;color:#fff;">Switching to Cover GUI...</div>' : 
					'<li>Switching to list view...</li>';
				setTimeout(render, 50);
				scrollToTop();
			}; // <-- CHAVE FECHADA AQUI
         
             function triggerReload() {
                 document.getElementById('list').innerHTML = '<li>Reloading database... Please wait.</li>';
                 document.getElementById('count').textContent = "Reloading | " + g_regionFilter;
         
                 fetchDB();
             }

             function setFilter(type, value, clickedElement) {
		if (type == 'letter') {
			g_letterFilter = value;
			f.query.value = "";
			
			var links = document.getElementById("letters").getElementsByTagName("a");
			for (var i = 0; i < links.length; i++) {
				links[i].className = "";
			}
		}
		else if (type == 'region') {
			g_regionFilter = value;
			
			var links = document.getElementById("region-links").getElementsByTagName("a");
			for (var i = 0; i < links.length; i++) {
				links[i].className = "";
			}
		}
		else if (type == 'search') {
			g_letterFilter = value;
			
			var links = document.getElementById("letters").getElementsByTagName("a");
			for (var i = 0; i < links.length; i++) {
				links[i].className = "";
			}
		}
	
		// ativa o botão clicado (letra ou região)
		if (clickedElement) {
			clickedElement.className = "active";
		}
	
		// mensagem de loading
		var loadingHTML = useCoverGUI ? 
			'<div style="text-align:center;padding:80px;color:#fff;font-size:18px;">Filtering...</div>' : 
			'<li>Filtering database... Please wait.</li>';
			
		document.getElementById('list').innerHTML = loadingHTML;
		document.getElementById('count').textContent = "Filtering | " + g_regionFilter;
	
		setTimeout(render, 10);
		scrollToTop();
		}	
			
				function createLetterLinks() {
		var links = '<a href="#" onclick="setFilter(\'letter\', \'^[0-9]\', this); return false;">[0-9]</a>';
		for (var c = 65; c < 91; c++) {
			var letra = String.fromCharCode(c);
			links += '<a href="#" onclick="setFilter(\'letter\', \'^' + letra + '\', this); return false;">' + letra + '</a>';
		}
			document.getElementById("letters").innerHTML = links;
		}
		createLetterLinks();

			function selectCategory(cat) {
				switch(cat) {
					case "games": dbPath = "https://ps3-pro.github.io/PSN-Content/resources/database/games.tsv"; break;
					case "avatars": dbPath = "https://ps3-pro.github.io/PSN-Content/resources/database/avatars.tsv"; break;
					case "demos": dbPath = "https://ps3-pro.github.io/PSN-Content/resources/database/demos.tsv"; break;
					case "dlcs": dbPath = "https://ps3-pro.github.io/PSN-Content/resources/database/dlcs.tsv"; break;
					case "themes": dbPath = "https://ps3-pro.github.io/PSN-Content/resources/database/themes.tsv"; break;
				}
			
				DB = [];
				if (window.localStorage) localStorage.removeItem("DB");  // ← CORRETO
			
				g_letterFilter = "";
				g_regionFilter = "ALL";
				f.query.value = "";
				
				if (g_defaultLetterFilter) {
					g_letterFilter = g_defaultLetterFilter; 
				}
			
				// Limpa letras e regiões (só getElementsByTagName, nada de querySelectorAll)
				var i;
				var letras = document.getElementById("letters").getElementsByTagName("a");
				for (i = 0; i < letras.length; i++) letras[i].className = "";
				
				var regioes = document.getElementById("region-links").getElementsByTagName("a");
				for (i = 0; i < regioes.length; i++) regioes[i].className = "";
				if (regioes[0]) regioes[0].className = "active";
			
				createLetterLinks();  // recria os links com onclick seguro
				
				if (isPS3 && g_defaultLetterFilter == '^[0-9]') {
					var links = document.getElementById("letters").getElementsByTagName("a");
					if (links.length > 0) {
						// O link [0-9] é o primeiro na lista
						links[0].className = "active";
					}
				}
				
				// ativa menu
				var menu = document.getElementById("selection-menu").getElementsByTagName("a");
				for (i = 0; i < menu.length; i++) {
					menu[i].className = menu[i].className.replace("active", "");
				}
				var ids = {games:"ln-game", avatars:"ln-avatar", demos:"ln-demos", dlcs:"ln-dlcs", themes:"ln-themes"};
				var el = document.getElementById(ids[cat]);
				if (el) el.className += " active";
			
				document.getElementById('list').innerHTML = '<li>Downloading database... Please wait.</li>';
				document.getElementById('count').textContent = "Loading...";
				
				fetchDB();
				scrollToTop();
			}
         
            document.getElementById("ln-avatar").onclick = function() { selectCategory("avatars"); return false; };
			document.getElementById("ln-demos").onclick   = function() { selectCategory("demos"); return false; };
			document.getElementById("ln-dlcs").onclick    = function() { selectCategory("dlcs"); return false; };
			document.getElementById("ln-game").onclick    = function() { selectCategory("games"); return false; };
			document.getElementById("ln-themes").onclick   = function() { selectCategory("themes"); return false; };
			
			// Detecta PS3 / PC
			var isPS3 = /PS3|PlayStation 3|NetFront/i.test(navigator.userAgent);
			
			if (isPS3) {
				document.body.className += " is-ps3";
				g_defaultLetterFilter = "^[0-9]";
				g_useCoverGUI = false;
				
				g_startupAlertMessage = [
					"Welcome to the PlayStation™ Database",
					"",
					"Save the downloads in System Storage > Packages",
					"and install via Package Manager."
				].join("\n");
			} else {
				document.body.className += " is-pc";
				g_useCoverGUI = true;
				useCoverGUI = true;
			}
			
			document.getElementById('cover-gui').checked = useCoverGUI;
			selectCategory("games");
			
			var links = document.getElementById("letters").getElementsByTagName("a");
			if (isPS3 && links.length > 0) {
				links[0].className = "active"; 
			}
			
			// Efeito rainbow no botão License Pack (100% compatível)
			try {
				var rainbowColors = ["#FF0000", "#FF7F00", "#FFFF00", "#00FF00", "#00FFFF", "#9400D3"];
				var idx = 0;
				setInterval(function() {
					var btn = document.getElementById("license-link-rainbow");
					if (btn) {
						btn.style.color = rainbowColors[idx];
						idx = (idx + 1) % rainbowColors.length;
					}
				}, 500);
			} catch(e) {}
					} catch (a) {
						alert(a);
					}
		</script>
		
			  <script type="text/javascript" src="https://github.com/PS3-Pro/Pages/raw/main/resources/scripts/flash_objects.js"></script>
		<div id="player_9428" align="center">
			</div>
	  <script>
		var flashvars_9428_config = {
			quality: "low",
			wmode: "transparent",
			bgcolor: "#ffffff",
			allowScriptAccess: "always",
			allowFullScreen: "true",
			flashvars: "url=https://github.com/PS3-Pro/Whats-New/raw/main/media/ads/hall_of_fame.mp3&autostart=yes"
		};
		var flashObjectAttributes_9428 = {};

		function loadFlashPlayer() {
			flashObject("https://github.com/PS3-Pro/Pages/raw/main/resources/swf/music_player/music_player_4.swf", 
				"player_9428", 
				"600", 
				"35", 
				"8", 
				false, 
				{},
				flashvars_9428_config,
				flashObjectAttributes_9428
			);
		}
	</script>
	  
	  
		<script>
			var invisibleAudio = document.getElementById('invisible-audio');
			var isPS3 = /PS3|PlayStation 3|NetFront/i.test(navigator.userAgent);
			
			var audioStarted = false;
		
			function startAudio() {
				if (!isPS3 && invisibleAudio && !audioStarted) {
					invisibleAudio.volume = 0.2;
					invisibleAudio.play()
						.then(() => {
							audioStarted = true;
						})
						.catch(error => {
						});
				}
			}
			
			document.addEventListener('DOMContentLoaded', function() {
				var pcOverlay = document.getElementById('welcome-overlay-pc');
				var continueBtn = document.getElementById('overlay-continue-btn');
				
				if (!isPS3 && continueBtn) {
					continueBtn.addEventListener('click', function() {
						startAudio();
						if (pcOverlay) pcOverlay.style.display = 'none';
					});
				}
				
			});
		</script>
   </body>
</html>